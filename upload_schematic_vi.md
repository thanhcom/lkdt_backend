# Tài liệu Upload Schematic (Tiếng Việt)

## 1. Chức năng

API hỗ trợ tạo và cập nhật Schematic cho Component bao gồm:

-   Upload file PDF hoặc ZIP (tùy chọn)
-   Upload nhiều ảnh schematicImages (tùy chọn)
-   Lưu metadata: tên schematic, componentId
-   Hỗ trợ cập nhật (edit) bao gồm thay đổi componentId, schematicName,
    thay file và ảnh

## 2. API Chi Tiết

### **1. Tạo mới Schematic**

**POST** `/api/schematics`

#### **Params (multipart/form-data)**

  Tên               Kiểu                  Bắt buộc   Giải thích
  ----------------- --------------------- ---------- -----------------------------
  componentId       Long                  ✓          ID của Component
  schematicName     String                ✓          Tên schematic
  schematicFile     File (PDF/ZIP)        ✗          File schematic PDF hoặc ZIP
  schematicImages   File\[\] (JPG, PNG)   ✗          Danh sách ảnh schematic

------------------------------------------------------------------------

### **2. Cập nhật Schematic**

**PUT** `/api/schematics/{id}`

#### **Params (multipart/form-data)**

Giống với tạo mới, nhưng có thêm:

  Tên   Kiểu   Giải thích
  ----- ------ ----------------------
  id    Long   ID schematic cần sửa

Bạn có thể cập nhật toàn bộ hoặc chỉ 1 phần: - Đổi componentId - Đổi
schematicName - Upload lại file schematicFile - Upload lại danh sách
schematicImages

------------------------------------------------------------------------

## 3. Hướng dẫn test bằng Postman

### **A. Tạo mới**

1.  Chọn **POST**
2.  URL: `http://localhost:8080/api/schematics`
3.  Tab **Body → form-data**
4.  Thêm các trường:
    -   **componentId**: số
    -   **schematicName**: text
    -   **schematicFile**: chọn file (PDF/ZIP)
    -   **schematicImages**: chọn nhiều ảnh → bấm *Bulk Edit* hoặc chọn
        từng ảnh

Nhớ set từng dòng type = **File** khi upload file.

### **B. Cập nhật**

1.  Chọn **PUT**
2.  URL: `http://localhost:8080/api/schematics/{id}`
3.  Tương tự form-data như khi tạo mới
4.  Upload lại file nào bạn muốn thay thế, không cần gửi tất cả.

------------------------------------------------------------------------

## 4. Ghi chú kỹ thuật

-   API sử dụng `@RequestPart` để nhận nhiều định dạng trong multipart.
-   Ảnh và file được upload qua Cloudinary hoặc filesystem (tùy service
    của bạn).
-   Nếu không gửi schematicImages thì server sẽ giữ nguyên danh sách cũ.
-   Nếu gửi ảnh mới → server sẽ xóa ảnh cũ và cập nhật lại.

------------------------------------------------------------------------

## 5. Trạng thái trả về

-   **201 Created** khi tạo mới
-   **200 OK** khi cập nhật
-   **400 Bad Request** khi thiếu trường bắt buộc
-   **404 Not Found** nếu không tìm thấy schematic

------------------------------------------------------------------------

## 6. Lời khuyên sử dụng

-   Khi upload nhiều ảnh → nên dùng Postman hoặc Insomnia
-   Tên ảnh + file nên dùng UUID để tránh trùng
-   Kiểm tra log server nếu response null (thường do sai key form-data)

------------------------------------------------------------------------

**© Generated by ChatGPT --- LKDT System**
